# 中国城市等距点查找器

这是一个用于查找中国城市之间等距点的工具。给定多个城市，程序会找出到这些城市距离相等的点，并在地图上可视化显示。

## 功能特点

- 支持多个输入城市
- 查找严格等距点和模糊等距点
- 自动处理海边城市的特殊情况
- 显示每个点的详细信息（省份、城市、坐标）
- 生成可视化地图，包含图例
- 支持中文城市名称输入

## 安装步骤

1. 克隆或下载本项目到本地

2. 安装依赖包：
```bash
pip install -r requirements.txt
```

3. 配置高德地图API密钥：
   - 访问[高德开放平台](https://lbs.amap.com/)
   - 注册账号并创建应用
   - 获取Web服务API密钥
   - 将密钥填入 `config.json` 文件中的 `amap_key` 字段

## 使用方法

1. 修改 `config.json` 文件中的输入城市：
```json
{
    "input_points": [
        "南京市",
        "杭州市"
    ]
}
```

2. 运行程序：
```bash
python main.py
```

3. 程序会自动：
   - 获取输入城市的经纬度
   - 计算等距点
   - 获取每个点的城市信息
   - 生成可视化地图

4. 输出结果：
   - 控制台会显示每个点的详细信息
   - 生成 `equidistant_points_map.png` 地图文件

## 文件结构

```
centerInChina/
├── config.json           # 配置文件，包含API密钥、输入城市和搜索参数
├── main.py              # 主程序入口，协调各个模块的工作
├── point_finder.py      # 点查找器类，负责计算等距点和获取城市信息
├── map_visualizer.py    # 地图可视化类，负责生成和显示地图
├── requirements.txt     # 项目依赖包列表
└── README.md           # 项目说明文档
```

### 文件说明

- `config.json`: 存储所有配置信息，包括高德地图API密钥、输入城市列表、搜索参数和地图边界范围
- `main.py`: 程序的主入口，负责加载配置、创建对象、调用各个模块的功能并输出结果
- `point_finder.py`: 包含 `PointFinder` 类，实现了等距点查找的核心算法和城市信息获取功能
- `map_visualizer.py`: 包含 `MapVisualizer` 类，负责调用高德地图API获取地图，并生成可视化结果
- `requirements.txt`: 列出项目所需的所有Python包及其版本要求
- `README.md`: 项目的说明文档，包含安装、使用方法和配置说明

## 配置说明

`config.json` 文件中的配置项：

- `amap_key`: 高德地图API密钥
- `input_points`: 输入城市列表
- `search_params`: 搜索参数
  - `tolerance`: 距离容差（公里）
  - `radius`: 搜索半径（公里）
  - `grid_size`: 网格大小
- `map_bounds`: 地图边界范围
  - `min_lat`: 最小纬度
  - `max_lat`: 最大纬度
  - `min_lon`: 最小经度
  - `max_lon`: 最大经度

## 输出说明

1. 控制台输出：
   - 输入点的详细信息
   - 严格等距点的详细信息
   - 模糊等距点的详细信息
   - 对于海边城市，会显示最近的3个城市及其距离

2. 地图输出：
   - 红色标记：输入点
   - 蓝色标记：严格等距点
   - 绿色标记：模糊等距点
   - 右侧图例显示所有点的详细信息

## 注意事项

1. 确保有稳定的网络连接
2. 高德地图API有调用频率限制，请合理使用
3. 对于海边城市，程序会自动获取最近的3个城市信息
4. 地图显示范围会根据所有点的分布自动调整

## 依赖包

- numpy >= 1.21.0
- geopy >= 2.2.0
- matplotlib >= 3.4.0
- requests >= 2.26.0
